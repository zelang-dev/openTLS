<!DOCTYPE html>
<html>
<!-- This is an automatically generated file.  Do not edit.
   $OpenBSD: tls_accept_socket.3,v 1.4 2018/05/26 12:35:26 schwarze Exp $
  
   Copyright (c) 2015 Ted Unangst <tedu@openbsd.org>
   Copyright (c) 2015 Joel Sing <jsing@openbsd.org>
   Copyright (c) 2016 Brent Cook <bcook@openbsd.org>
  
   Permission to use, copy, modify, and distribute this software for any
   purpose with or without fee is hereby granted, provided that the above
   copyright notice and this permission notice appear in all copies.
  
   THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
   WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
   MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
   ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
   WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
   ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
   OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
   -->
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    .Nd, .Bf, .Op { display: inline; }
    .Pa, .Ad { font-style: italic; }
    .Ms { font-weight: bold; }
    .Bl-diag > dt { font-weight: bold; }
    code.Nm, .Fl, .Cm, .Ic, code.In, .Fd, .Fn, .Cd { font-weight: bold;
      font-family: inherit; }
  </style>
  <title>TLS_ACCEPT_SOCKET(3)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">TLS_ACCEPT_SOCKET(3)</td>
    <td class="head-vol">Library Functions Manual</td>
    <td class="head-rtitle">TLS_ACCEPT_SOCKET(3)</td>
  </tr>
</table>
<div class="manual-text">
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<p class="Pp"><code class="Nm">tls_accept_socket</code>,
    <code class="Nm">tls_accept_fds</code>,
    <code class="Nm">tls_accept_cbs</code> &#x2014; <span class="Nd">accept an
    incoming client connection in a TLS server</span></p>
</section>
<section class="Sh">
<h1 class="Sh" id="SYNOPSIS"><a class="permalink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<p class="Pp"><code class="In">#include
  &lt;<a class="In">tls.h</a>&gt;</code></p>
<p class="Pp"><var class="Ft">int</var>
  <br/>
  <code class="Fn">tls_accept_socket</code>(<var class="Fa">struct tls
    *tls</var>, <var class="Fa">struct tls **cctx</var>, <var class="Fa">int
    socket</var>);</p>
<p class="Pp"><var class="Ft">int</var>
  <br/>
  <code class="Fn">tls_accept_fds</code>(<var class="Fa">struct tls *tls</var>,
    <var class="Fa">struct tls **cctx</var>, <var class="Fa">int fd_read</var>,
    <var class="Fa">int fd_write</var>);</p>
<p class="Pp"><var class="Ft">int</var>
  <br/>
  <code class="Fn">tls_accept_cbs</code>(<var class="Fa">struct tls *tls</var>,
    <var class="Fa">struct tls **cctx</var>, <var class="Fa">ssize_t
    (*tls_read_cb)(struct tls *ctx, void *buf, size_t buflen, void
    *cb_arg)</var>, <var class="Fa">ssize_t (*tls_write_cb)(struct tls *ctx,
    const void *buf, size_t buflen, void *cb_arg)</var>, <var class="Fa">void
    *cb_arg</var>);</p>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<p class="Pp">After creating a TLS server context <var class="Fa">tls</var> with
    <a class="Xr">tls_server(3)</a> and configuring it with
    <a class="Xr">tls_configure(3)</a>, a server can accept a new client
    connection by calling
    <a class="permalink" href="#tls_accept_socket"><code class="Fn" id="tls_accept_socket">tls_accept_socket</code></a>()
    on an already established socket connection.</p>
<p class="Pp" id="tls_accept_fds">Alternatively, a new client connection can be
    accepted over a pair of existing file descriptors by calling
    <a class="permalink" href="#tls_accept_fds"><code class="Fn">tls_accept_fds</code></a>().</p>
<p class="Pp" id="tls_accept_cbs">Calling
    <a class="permalink" href="#tls_accept_cbs"><code class="Fn">tls_accept_cbs</code></a>()
    allows read and write callback functions to handle data transfers. The
    specified <var class="Fa">cb_arg</var> parameter is passed back to the
    functions, and can contain a pointer to any caller-specified data.</p>
<p class="Pp">All these functions create a new context suitable for reading and
    writing and return it in *<var class="Fa">cctx</var>.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="RETURN_VALUES"><a class="permalink" href="#RETURN_VALUES">RETURN
  VALUES</a></h1>
<p class="Pp">These functions return 0 on success or -1 on error.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SEE_ALSO"><a class="permalink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<p class="Pp"><a class="Xr">tls_close(3)</a>,
    <a class="Xr">tls_config_set_session_id(3)</a>,
    <a class="Xr">tls_configure(3)</a>, <a class="Xr">tls_connect(3)</a>,
    <a class="Xr">tls_init(3)</a>, <a class="Xr">tls_server(3)</a></p>
</section>
<section class="Sh">
<h1 class="Sh" id="HISTORY"><a class="permalink" href="#HISTORY">HISTORY</a></h1>
<p class="Pp"><code class="Fn">tls_accept_socket</code>() appeared in
    <span class="Ux">OpenBSD 5.6</span> and got its final name in
    <span class="Ux">OpenBSD 5.7</span>.</p>
<p class="Pp"><code class="Fn">tls_accept_fds</code>() appeared in
    <span class="Ux">OpenBSD 5.8</span> and
    <code class="Fn">tls_accept_cbs</code>() in <span class="Ux">OpenBSD
    6.1</span>.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="AUTHORS"><a class="permalink" href="#AUTHORS">AUTHORS</a></h1>
<p class="Pp"><span class="An">Joel Sing</span>
    &lt;<a class="Mt" href="mailto:jsing@openbsd.org">jsing@openbsd.org</a>&gt;</p>
<p class="Pp"><code class="Fn">tls_accept_cbs</code>() was written by
    <span class="An">Tobias Pape</span>
    &lt;<a class="Mt" href="mailto:tobias@netshed.de">tobias@netshed.de</a>&gt;.</p>
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">May 26, 2018</td>
    <td class="foot-os">Debian</td>
  </tr>
</table>
</body>
</html>
