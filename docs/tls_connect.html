<!DOCTYPE html>
<html>
<!-- This is an automatically generated file.  Do not edit.
   $OpenBSD: tls_connect.3,v 1.4 2018/07/09 19:51:18 tb Exp $
  
   Copyright (c) 2014 Ted Unangst <tedu@openbsd.org>
   Copyright (c) 2014, 2015 Joel Sing <jsing@openbsd.org>
   Copyright (c) 2016 Brent Cook <bcook@openbsd.org>
  
   Permission to use, copy, modify, and distribute this software for any
   purpose with or without fee is hereby granted, provided that the above
   copyright notice and this permission notice appear in all copies.
  
   THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
   WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
   MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
   ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
   WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
   ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
   OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
   -->
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    .Nd, .Bf, .Op { display: inline; }
    .Pa, .Ad { font-style: italic; }
    .Ms { font-weight: bold; }
    .Bl-diag > dt { font-weight: bold; }
    code.Nm, .Fl, .Cm, .Ic, code.In, .Fd, .Fn, .Cd { font-weight: bold;
      font-family: inherit; }
  </style>
  <title>TLS_CONNECT(3)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">TLS_CONNECT(3)</td>
    <td class="head-vol">Library Functions Manual</td>
    <td class="head-rtitle">TLS_CONNECT(3)</td>
  </tr>
</table>
<div class="manual-text">
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<p class="Pp"><code class="Nm">tls_connect</code>,
    <code class="Nm">tls_connect_fds</code>,
    <code class="Nm">tls_connect_servername</code>,
    <code class="Nm">tls_connect_socket</code>,
    <code class="Nm">tls_connect_cbs</code> &#x2014; <span class="Nd">instruct a
    TLS client to establish a connection</span></p>
</section>
<section class="Sh">
<h1 class="Sh" id="SYNOPSIS"><a class="permalink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<p class="Pp"><code class="In">#include
  &lt;<a class="In">tls.h</a>&gt;</code></p>
<p class="Pp"><var class="Ft">int</var>
  <br/>
  <code class="Fn">tls_connect</code>(<var class="Fa">struct tls *ctx</var>,
    <var class="Fa">const char *host</var>, <var class="Fa">const char
    *port</var>);</p>
<p class="Pp"><var class="Ft">int</var>
  <br/>
  <code class="Fn">tls_connect_fds</code>(<var class="Fa">struct tls *ctx</var>,
    <var class="Fa">int fd_read</var>, <var class="Fa">int fd_write</var>,
    <var class="Fa">const char *servername</var>);</p>
<p class="Pp"><var class="Ft">int</var>
  <br/>
  <code class="Fn">tls_connect_servername</code>(<var class="Fa">struct tls
    *ctx</var>, <var class="Fa">const char *host</var>, <var class="Fa">const
    char *port</var>, <var class="Fa">const char *servername</var>);</p>
<p class="Pp"><var class="Ft">int</var>
  <br/>
  <code class="Fn">tls_connect_socket</code>(<var class="Fa">struct tls
    *ctx</var>, <var class="Fa">int s</var>, <var class="Fa">const char
    *servername</var>);</p>
<p class="Pp"><var class="Ft">int</var>
  <br/>
  <code class="Fn">tls_connect_cbs</code>(<var class="Fa">struct tls *ctx</var>,
    <var class="Fa">ssize_t (*tls_read_cb)(struct tls *ctx, void *buf, size_t
    buflen, void *cb_arg)</var>, <var class="Fa">ssize_t (*tls_write_cb)(struct
    tls *ctx, const void *buf, size_t buflen, void *cb_arg)</var>,
    <var class="Fa">void *cb_arg</var>, <var class="Fa">const char
    *servername</var>);</p>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<p class="Pp">After creating a TLS client context with
    <a class="Xr">tls_client(3)</a> and configuring it with
    <a class="Xr">tls_configure(3)</a>, a client connection is initiated by
    calling
    <a class="permalink" href="#tls_connect"><code class="Fn" id="tls_connect">tls_connect</code></a>().
    This function will create a new socket, connect to the specified
    <var class="Fa">host</var> and <var class="Fa">port</var>, and then
    establish a secure connection. The <var class="Fa">port</var> may be numeric
    or a service name. If it is <code class="Dv">NULL</code>, then a
    <var class="Fa">host</var> of the format &quot;hostname:port&quot; is
    permitted. The name to use for verification is inferred from the
    <var class="Ar">host</var> value.</p>
<p class="Pp" id="tls_connect_servername">The
    <a class="permalink" href="#tls_connect_servername"><code class="Fn">tls_connect_servername</code></a>()
    function has the same behaviour, however the name to use for verification is
    explicitly provided, for the case where the TLS server name differs from the
    DNS name.</p>
<p class="Pp" id="tls_connect_socket">An already existing socket can be upgraded
    to a secure connection by calling
    <a class="permalink" href="#tls_connect_socket"><code class="Fn">tls_connect_socket</code></a>().</p>
<p class="Pp" id="tls_connect_fds">Alternatively, a secure connection can be
    established over a pair of existing file descriptors by calling
    <a class="permalink" href="#tls_connect_fds"><code class="Fn">tls_connect_fds</code></a>().</p>
<p class="Pp" id="tls_connect_cbs">Calling
    <a class="permalink" href="#tls_connect_cbs"><code class="Fn">tls_connect_cbs</code></a>()
    allows read and write callback functions to handle data transfers. The
    specified cb_arg parameter is passed back to the functions, and can contain
    a pointer to any caller-specified data.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="RETURN_VALUES"><a class="permalink" href="#RETURN_VALUES">RETURN
  VALUES</a></h1>
<p class="Pp">These functions return 0 on success or -1 on error.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SEE_ALSO"><a class="permalink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<p class="Pp"><a class="Xr">tls_accept_socket(3)</a>,
    <a class="Xr">tls_client(3)</a>, <a class="Xr">tls_close(3)</a>,
    <a class="Xr">tls_config_ocsp_require_stapling(3)</a>,
    <a class="Xr">tls_configure(3)</a>, <a class="Xr">tls_handshake(3)</a>,
    <a class="Xr">tls_init(3)</a></p>
</section>
<section class="Sh">
<h1 class="Sh" id="HISTORY"><a class="permalink" href="#HISTORY">HISTORY</a></h1>
<p class="Pp"><code class="Fn">tls_connect</code>() and
    <code class="Fn">tls_connect_socket</code>() appeared in
    <span class="Ux">OpenBSD 5.6</span> and got their final names in
    <span class="Ux">OpenBSD 5.7</span>.</p>
<p class="Pp"><code class="Fn">tls_connect_fds</code>() and
    <code class="Fn">tls_connect_servername</code>() appeared in
    <span class="Ux">OpenBSD 5.7</span> and
    <code class="Fn">tls_connect_cbs</code>() in <span class="Ux">OpenBSD
    6.1</span>.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="AUTHORS"><a class="permalink" href="#AUTHORS">AUTHORS</a></h1>
<p class="Pp"><span class="An">Joel Sing</span>
    &lt;<a class="Mt" href="mailto:jsing@openbsd.org">jsing@openbsd.org</a>&gt;
  <br/>
  <span class="An">Reyk Floeter</span>
    &lt;<a class="Mt" href="mailto:reyk@openbsd.org">reyk@openbsd.org</a>&gt;</p>
<p class="Pp"><code class="Fn">tls_connect_cbs</code>() was written by
    <span class="An">Tobias Pape</span>
    &lt;<a class="Mt" href="mailto:tobias@netshed.de">tobias@netshed.de</a>&gt;.</p>
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">July 9, 2018</td>
    <td class="foot-os">Debian</td>
  </tr>
</table>
</body>
</html>
